<!DOCTYPE html>
<html>

<head>
    <meta name="author" content="Anca Preoteasa">
    <title>Quiz Game</title>
    <meta charset="utf-8>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../SIIT-GR32/Week 6/global.css">
    <link rel="icon" type="image/png" href="Images/quiz-favicon.jpg">

    <style>
         body {
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
            font-family: Arial, sans-serif;
        }

        .hidden {
            display: none;
        }

        .nav {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: row;
            background-color: #457373;
            width: 100%;
            height: 100%;
        }

        .h1-first {
            color: #eaede9;
            text-align: center;
            letter-spacing: 5px;
            padding: 50px 0;
            font-size: 3em;
            animation: quiz-heading 600ms ease-in;
        }

        .h1-result {
        color: #eaede9;
        text-align: center;
        letter-spacing: 1px;
        padding: 50px;
        margin: 0 50px;
        font-size: 3em;
      }

      .h1-result,
      .h2-result,
      .h3-result,
      .bottom-button-wrapper {
        display: flex;
    justify-content: center;
        color: #405d5b;
        margin: 50px 0;
      }

        .exclamation-mark {
            color: #eaede9;
            padding: 50px 0;
            font-size: 4em;
            animation: quiz-heading 1000ms ease-in;
        }

        @keyframes quiz-heading {
            0% {
                transform: translateY(-100%);
            }

            50% {
                transform: translateY(-50%);
            }

            100% {
                transform: translateY(0);
            }
        }

        .down-arrow {
            position: absolute;
            top: 15em;
            left: 20em;
            width: 0;
            height: 30px;
            border: 2px solid;
            border-radius: 2px;
            animation: jumpInfinite 1.5s infinite;
            color: darkslategray;
        }

        @keyframes jumpInfinite {
            0% {
                margin-top: 0;
            }

            50% {
                margin-top: 20px;
            }

            100% {
                margin-top: 0;
            }
        }

        .down-arrow:after {
            content: " ";
            position: absolute;
            top: 12px;
            left: -10px;
            width: 16px;
            height: 16px;
            border-bottom: 4px solid;
            border-right: 4px solid;
            border-radius: 4px;
            transform: rotateZ(45deg);
            color: darkslategray;
        }

        .nav button {
            color: #eeecec;
            background-color: #457373;
            margin: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: 600;
            font-size: 1em;
        }

        .questions-image-container {
            display: flex;
            flex-grow: 1 1;
        }

        .quiz-questions {
            width: 100%;
            height: calc(100vh - 200px);
            background-image: url("Images/green-geometric-frame.avif");
            padding: 20px 0;

            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .quiz-questions button {
            color: white;
            padding: 20px 40px;
            border-radius: 5px;
            font-size: 1.2em;
            background-color: #457373;
            margin: 10px;
        }

        button:hover {
            color: #023737;
            background-color: #f6f2f2;
            cursor: pointer;
            font-weight: bold;
        }

        h2 {
            color: #524f4f;
            padding: 20px 40px;
            text-align: center;
            font-size: 2em;
        }

        .choice-wrapper {
            display: flex;
            flex-direction: row;
            align-items: center;
            align-content: center;
            justify-content: center;
        }

        img {
            width: 50em;
            height: 100%;
        }

        @media only screen and (max-width: 600px) {
            h1 {
                padding: 20px;
            }

            img {
                height: 350px;
            }

            .questions-image-container {
                flex-direction: column;
            }
            .cookies-message {
               flex-direction: column;
               align-items: center;
            }
            .cookies-paragraph{
                text-align: center;
                padding-top: 4em;
                margin-top: 3em;
            }
            .btn-close-cookies {
                max-width: fit-content;
            }
        }

        @media only screen and (max-width: 820px) {
            .down-arrow {
                display: none;
            }
        }
        
        @media only screen and (max-width: 1000px) {
            .questions-image-container {
                flex-direction: column-reverse;
            }

            img {
                width: 100vw;
            }

            .quiz-questions {
                height: 300px;
            }

            .quiz-questions button {
                padding: 20px;
            }

            .down-arrow {
                top: calc(100vh - 60px);
                left: calc(50% - 14px);
            }
        }

        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .question-container {
            margin-top: 20px;
            border-top: 1px solid #ccc;
            padding-top: 20px;
        }

        form {
            margin-top: 20px;
        }

        .answer-container {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        label {
            margin-left: 10px;
            font-size: 18px;
        }

        button {
            display: block;
            padding: 10px;
            background-color: #0e150e;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background-color: #618d63;
        }

        .btn-close-cookies {
            display: flex;
            align-content: center;
            align-items: center;
            justify-content: center;
        }

        .button-cookies-wrapper {
            background-color: rgb(236 236 236);
            padding: 0.5em;
            display: flex;
             align-content: center;
             align-items: center;
           justify-content: center;
     }

     .cookies-message {
               display: flex;
     }

     .cookies-paragraph{
        padding: 1em;
     }

        .button-result {
        color: white;
        background-color: #5f9091;
        padding: 10px;
        border-radius: 5px;
        font-size: 1.2em;
        margin: 5px;
      }

      .button-result:hover {
        color: #023737;
        background-color: #f6f2f2;
      }

      .result-share-btn {
        margin: 10px 0;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .result-message,
      .share-btn {
        margin: 10px;
      }

      .congratulation-message {
        font-size: 2em;
        border: 1px solid;
        padding: 20px;
      }
        #result {
            margin-top: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }

        .result-body {
        background-color: #457373;
        background-image: url("Images/green-geometric-frame.avif");
      }
    </style>
</head>

<body id="body">
    <div class="nav">
        <h1 class="h1-first">Quiz Time</h1> <span class="exclamation-mark">!</span>
        <div class="down-arrow"></div>
    </div>
    <hr>
    <div class="questions-image-container">
        <div class="quiz-questions">
            <h2 id="question"></h2>
            <div id="answer-buttons" class="choice-wrapper">
                <button id="choice1" class="choice-btn"></button>
                <button id="choice2" class="choice-btn"></button>
                <button id="choice3" class="choice-btn"></button>
            </div>
        </div>
        <div class="image-container">
            <img src="Images/espanol.avif"></img>
        </div>
    </div>
</body>
<script>
    const cookieMessage = document.createElement('div');
    cookieMessage.classList.add('button-cookies-wrapper');
    cookieMessage.innerHTML = '<div class="cookies-message"><p class="cookies-paragraph">We use cookies for improved functionality and analytics. </p> <button class="btn-close-cookies">Got it!</button></div>'
    document.body.append(cookieMessage);

    cookieMessage.style.backgroundColor = "#cfcccc;";
    cookieMessage.style.height = "4em";

    document.querySelector('.btn-close-cookies').addEventListener('click', function(){
        cookieMessage.remove();
    })

    const questions = [
        {
            question: "How do you say 'Hello' in Spanish?",
            choices: ["Hola", "Ola", "Holla"],
            correctAnswer: 0,
        },

        {
            question: "How do you say 'Good morning'?",
            choices: ["Buenas noches", "Buenas tardes", "Buenos días"],
            correctAnswer: 2,
        },
        {
            question: "Which on is not a school supply?",
            choices: ["cuaderno", "boli", "patio"],
            correctAnswer: 2,
        }, 
        {   question: "What does 'Por favor' mean?",
            choices: ["I am begging you", "Thank you", "Please"],
            correctAnswer: 0,
         },
         {
            question: "How do you say 'Sorry'?",
            choices: ["Lo siento", "Saludos", "Gracias"],
            correctAnswer: 0,
         },
         {
          question: "What is 'I ate'?",
          choices: ["Comé", "Comí", "Como"],
          correctAnswer: 1,
         },
         {
            question: "Complete the sentence 'Perdón, me podría...'?",
          choices: ["comer el helado", "ayudar a mi amigo", "decir la hora"],
          correctAnswer: 2,
         },
         {
          question: "How do you say 'the coffee'?",
          choices: ["la café","el cafe","el café"],
          correctAnswer: 2,
        },
        {
          question:
            "What is the next number in the list 'ocho, diez, doce...'?",
          choices: ["catorce", "quince", "trece"],
          correctAnswer: 0,
        },
        {
          question: "How do you say 'the fork'?",
          choices: ["la forca", "la tenedora", "el tenedor"],
          correctAnswer: 2,
        },
        {
          question: "How do you say 'I am full'?",
          choices: ["Soy lleno", "Estoy lleno", "Estoy vacía"],
          correctAnswer: 1,
        }
    ];
    
    let currentQuestion = 0;
    let correctAnswersCounter = 0;

    
    function handleClick(choiceIndex) {
        if (choiceIndex === questions[currentQuestion].correctAnswer) {
            correctAnswersCounter++;
        }
        
        document.getElementById("choice1").removeEventListener("click", handleClick);
        document.getElementById("choice2").removeEventListener("click", handleClick);
        document.getElementById("choice3").removeEventListener("click", handleClick);
        
        showQuestion(currentQuestion + 1);
    }
    
    function setupQuizEventListeners() {
    document.getElementById("choice1").addEventListener("click", () => handleClick(0));
    document.getElementById("choice2").addEventListener("click", () => handleClick(1));
    document.getElementById("choice3").addEventListener("click", () => handleClick(2));
}
    
setupQuizEventListeners()

function showQuestion(currentQuestionIndex) {
    if (currentQuestionIndex < questions.length) {
        currentQuestion = currentQuestionIndex;

        let currentQuestionData = questions[currentQuestionIndex];
        let choices = currentQuestionData.choices;

        document.getElementById("question").textContent = currentQuestionData.question;
        document.getElementById("choice1").textContent = choices[0];
        document.getElementById("choice2").textContent = choices[1];
        document.getElementById("choice3").textContent = choices[2];
    } else {
        displayResultPage();
        const finishQuizSound = document.getElementById("finish-sound");
        finishQuizSound.play();
    }
}

function retakeQuiz() {
    location.reload();
}

function displayResultPage() {
    let displayResultMessage = `You got ${correctAnswersCounter}/${questions.length}`;
    let resultPage = `
        <body id="result-body">
            <h1 class="h1-result h1-result">Result:</h1>
            <h2 class="congratulation-message h2-result">Congratulations on finishing the quiz!</h2>
            <div class="result-share-btn">
                <h2 class="result-message h2-result">${displayResultMessage}</h2>
                <button class="share-btn button-result">Share</button>
            </div>
            <div class="bottom-button-wrapper">
                <button class="button-result" onclick="retakeQuiz()">Retake quiz</button>
                <button class="button-result" onclick="checkAnswers()">Check Answers</button>
                <button class="button-result">Subscribe!</button>
            </div>
            <div id="results-text"><div>
            <audio src="applause3.wav" id="finish-sound"></audio>
        </body>
    `;
    document.body.innerHTML = resultPage;
}

showQuestion(0);

function checkAnswers() {
    let resultMessageEl = document.getElementById("results-displayed");

    if (!resultMessageEl) {
        const bodyEl = document.getElementById("body");
        resultMessageEl = document.createElement("div");
        resultMessageEl.id = "results-displayed";
        resultMessageEl.style.display = "block";
        bodyEl.appendChild(resultMessageEl);

        for (let i = 0; i < questions.length; i++) {
            let question = questions[i].question;
            let correctAnswer = questions[i].choices[questions[i].correctAnswer];
            let currentAnswerText = `${i + 1}: ${question} - ${correctAnswer}\n`;
            let currentAnswerEl = document.createElement("div");
            currentAnswerEl.innerText = currentAnswerText;
            resultMessageEl.appendChild(currentAnswerEl);
        }
    } else {
        resultMessageEl.style.display = resultMessageEl.style.display === "none" ? "block" : "none";
    }
}

const choiceWrapper = document.querySelector(".choice-wrapper");

const handleHover = function (e) {
    if(e.target.classList.contains("choice-btn")){
            const btn = e.target;
            const siblings = btn.closest(".choice-wrapper").querySelectorAll(".choice-btn");

            siblings.forEach(el => {
                if (el !== btn) el.style.opacity = this;
    
            })
        }
}
    
    choiceWrapper.addEventListener("mouseover", handleHover.bind(0.5));

    choiceWrapper.addEventListener("mouseout", handleHover.bind(1));
</script>

</html>